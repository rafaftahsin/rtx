"use strict";(self.webpackChunkrtx=self.webpackChunkrtx||[]).push([[561],{9014:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var t=o(5893),s=o(1151);const l={title:"CodeDeploy"},r=void 0,i={id:"1 Infrastructure/2 Cloud/1 AWS/CodeDeploy",title:"CodeDeploy",description:"----",source:"@site/ops/1 Infrastructure/2 Cloud/1 AWS/CodeDeploy.md",sourceDirName:"1 Infrastructure/2 Cloud/1 AWS",slug:"/1 Infrastructure/2 Cloud/1 AWS/CodeDeploy",permalink:"/rtx/ops/1 Infrastructure/2 Cloud/1 AWS/CodeDeploy",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"CodeDeploy"},sidebar:"tutorialSidebar",previous:{title:"AWS",permalink:"/rtx/ops/1 Infrastructure/2 Cloud/1 AWS/"},next:{title:"Cognito",permalink:"/rtx/ops/1 Infrastructure/2 Cloud/1 AWS/Cognito"}},c={},d=[{value:"Introductory video",id:"introductory-video",level:4},{value:"Various Components of AWS CodeDeploy",id:"various-components-of-aws-codedeploy",level:4},{value:"Demo",id:"demo",level:4},{value:"<code>AppSpec</code> file",id:"appspec-file",level:4},{value:"Log File Location",id:"log-file-location",level:4},{value:"Install CodeDeploy Agent",id:"install-codedeploy-agent",level:4}];function a(e){const n={a:"a",code:"code",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"introductory-video",children:"Introductory video"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.youtube.com/watch?v=jcR9iIWdU7E",children:"https://www.youtube.com/watch?v=jcR9iIWdU7E"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"various-components-of-aws-codedeploy",children:"Various Components of AWS CodeDeploy"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Deployment Group","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Group of Instances or target where codedeploy instructions will run."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Deployment Configuration","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"How gradually instance will get the update? All at once ? Bluegreen? One by one? 50% at once etc..."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Source Code Must contain ",(0,t.jsx)(n.code,{children:"AppSpec.yml"})," file describing what will be done."]}),"\n",(0,t.jsx)(n.li,{children:"AWS CodeDeploy currently support source code from Github and S3 bucket only."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"demo",children:"Demo"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.youtube.com/watch?v=DgPkL5TFMu4",children:"https://www.youtube.com/watch?v=DgPkL5TFMu4"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h4,{id:"appspec-file",children:[(0,t.jsx)(n.code,{children:"AppSpec"})," file"]}),"\n",(0,t.jsxs)(n.p,{children:["Example ",(0,t.jsx)(n.code,{children:"AppSpec"})," file"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"version: 0.0\nos: linux\nfiles:\n  - source: /\n    destination: /var/www/html/WordPress\nhooks:\n  BeforeInstall:\n    - location: scripts/install_dependencies.sh\n      timeout: 300\n      runas: root\n  AfterInstall:\n    - location: scripts/change_permissions.sh\n      timeout: 300\n      runas: root\n  ApplicationStart:\n    - location: scripts/start_server.sh\n    - location: scripts/create_test_db.sh\n      timeout: 300\n      runas: root\n  ApplicationStop:\n    - location: scripts/stop_server.sh\n      timeout: 300\n      runas: root\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Ref:  ",(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/codedeploy/latest/userguide/reference-appspec-file.html#appspec-reference-server",children:"https://docs.aws.amazon.com/codedeploy/latest/userguide/reference-appspec-file.html#appspec-reference-server"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"log-file-location",children:"Log File Location"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"less /var/log/aws/codedeploy-agent/codedeploy-agent.log\n"})}),"\n",(0,t.jsx)(n.p,{children:"Ref:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/codedeploy/latest/userguide/deployments-view-logs.html",children:"https://docs.aws.amazon.com/codedeploy/latest/userguide/deployments-view-logs.html"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/codedeploy/latest/userguide/codedeploy-agent-operations-install-linux.html",children:"https://docs.aws.amazon.com/codedeploy/latest/userguide/codedeploy-agent-operations-install-linux.html"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/codedeploy/latest/userguide/reference-appspec-file.html",children:"https://docs.aws.amazon.com/codedeploy/latest/userguide/reference-appspec-file.html"})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"install-codedeploy-agent",children:"Install CodeDeploy Agent"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo yum update\nsudo yum install ruby\nsudo yum install wget\n\nwget https://bucket-name.s3.region-identifier.amazonaws.com/latest/install\n\nchmod +x ./install\nsudo ./install auto\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},1151:(e,n,o)=>{o.d(n,{Z:()=>i,a:()=>r});var t=o(7294);const s={},l=t.createContext(s);function r(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);